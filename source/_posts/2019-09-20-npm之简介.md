---
title: npm之简介
tags: []
toc: true
mathjax: true
date: 2019-09-20 11:50:46
categories:
    - npm
---

## 什么是npm

npm是世界上最大的软件注册表。js包管理工具，包的结构能够使我们轻松的跟踪依赖项和版本。

npm由三部分组成：

1. 网站：开发者查找包，设置参数以及管理npm使用体验的主要途径
2. 注册表：是一个巨大的数据库，保存了每个包的信息
3. CLI：通过命令行或终端运行

## 如何安装npm&管理npm版本

安装npm：NodeJs官网进行下载安装

管理npm版本：使用nvm进行npm多版本管理

更新npm

```shell
npm -v // 显示当前npm版本
npm install npm@latest -g // 安装官方最新测试版本
npm install npm@next -g // 安装即将发布的最新版本
```

## Semver

### 介绍

Semver全称Semantic versioning（语义化版本），其作用是当开发者依赖某个包时，当包更新时，开发者能通过Semver明确这次更新的程度与影响范围，并在必要时更改他们的代码来适配新的版本。

npm使用语义化控制版本，我们可安装一定版本范围内的npm包，npm会选择和你指定的版本**相匹配**的**latest（最新版本）**安装。

### 规则

npm的版本号由三部分组成，变更不同的版本号代表不同的意义：

- 主版本号（major）
- 次版本号（minor）
- 补丁版本号（patch）

|  更改内容 |  阶段 | 规则 | 示例 |
|---|---|---|---|
|  第一次发布 |  New Product | 把1.0.0作为起始版本 | 1.0.0 |
| 向后兼容的Bug修复或极小的改动 | Patch release | patch版本+1 | 1.0.1 |
| 向后兼容的新功能 | Minor release | minor版本+1 | 1.1.0 |
| 不向后兼容的更改 | Major release | major版本+1 | 2.0.0 |

有时候为了表达更确切的版本，还会在版本号后面添加**标签**或者**扩展**，来说明是预发布版本或者测试版本等，例如：2.0.2-beta-3。

常见的标签有：

| 标签 | 意义 | 说明 |
|---|---|---|
| demo  | demo版本 | 可能用于验证问题的版本 |
| dev  | 开发版 | 开发阶段使用，bug多，体积较大等特点，功能不完善 |
| alpha | α版本 | 用于内部交流或者测试人员测试，bug较多 |
| beta | 测试版本（β版本） | 较α版本，有较大的改进，但是还是有bug |
| gamma | 伽马版本（γ版本） | 较α和β版本有很大的改进，与稳定版相差无几，用户可使用 |
| trial | 试用版本 | 本软件通常都有时间限制，过期之后用户如果希望继续使用，一般得交纳一定的费用进行注册或购买。有些试用版软件还在功能上做了一定的限制。 |
| stable | 稳定版本 | |
| csp | 内容安全版本 | js库常用 |


## 限制安装包的版本

在package.json中可以通过一些符号来限制包只能更新到某个版本

- Patch release: 1.0 or 1.0.x or ~1.0.x

## 安装包的方式

安装包有两种方式：本地安装和全局安装，采用何种安装方式取决于要如何使用这个包：

- 如果你自己的模块依赖于某个包，并且通过NodeJs的`require`加载，那么你应该选择本地安装这个包，这也是`npm install`命令的默认行为
- 如果你想将包作为一个命令行工具，比如`grunt CLI`，那么你应该选择全局安装

### 本地包



### 全局包